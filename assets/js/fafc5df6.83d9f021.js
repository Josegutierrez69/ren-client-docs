(window.webpackJsonp=window.webpackJsonp||[]).push([[293],{326:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return i})),t.d(n,"metadata",(function(){return c})),t.d(n,"toc",(function(){return s})),t.d(n,"default",(function(){return u}));var r=t(3),a=t(9),o=(t(0),t(415)),i={title:"RenJS v3",description:"Quick-start page for RenJS v3"},c={unversionedId:"ren-js-v3",id:"ren-js-v3",isDocsHomePage:!1,title:"RenJS v3",description:"Quick-start page for RenJS v3",source:"@site/ren-js/ren-js-v3.mdx",slug:"/ren-js-v3",permalink:"/ren-client-docs/ren-js/ren-js-v3",editUrl:"https://github.com/renproject/ren-client-docs/edit/master/ren-js/ren-js-v3.mdx",version:"current",sidebar:"docs",previous:{title:"Quick Start",permalink:"/ren-client-docs/ren-js/quick-start"},next:{title:"Overview",permalink:"/ren-client-docs/ren-js/tutorial/overview"}},s=[{value:"Demo",id:"demo",children:[]},{value:"Installation",id:"installation",children:[]},{value:"Usage",id:"usage",children:[]}],l={toc:s};function u(e){var n=e.components,t=Object(a.default)(e,["components"]);return Object(o.mdx)("wrapper",Object(r.default)({},l,t,{components:n,mdxType:"MDXLayout"}),Object(o.mdx)("p",null,"The docs are in the progress of being updated to reflect the changes in RenJS v3. The v2 docs will remain available alongside the v3 docs."),Object(o.mdx)("p",null,"The RenJS v3 type references are available at ",Object(o.mdx)("a",{parentName:"p",href:"https://renproject.github.io/ren-js-v3-docs/classes/_renproject_ren.RenJS.html"},"renproject.github.io/ren-js-v3-docs"),"."),Object(o.mdx)("h2",{id:"demo"},"Demo"),Object(o.mdx)("p",null,"An example bridge built using RenJS v3 can be found here:"),Object(o.mdx)("ul",null,Object(o.mdx)("li",{parentName:"ul"},"GitHub: ",Object(o.mdx)("a",{parentName:"li",href:"https://github.com/renproject/ren-js-v3-demo"},"github.com/renproject/ren-js-v3-demo")),Object(o.mdx)("li",{parentName:"ul"},"Deployed version: ",Object(o.mdx)("a",{parentName:"li",href:"https://renproject.github.io/ren-js-v3-demo/"},"https://renproject.github.io/ren-js-v3-demo/"))),Object(o.mdx)("h2",{id:"installation"},"Installation"),Object(o.mdx)("pre",null,Object(o.mdx)("code",{parentName:"pre",className:"language-sh"},"yarn add @renproject/ren@next @renproject/chains@next\n")),Object(o.mdx)("h2",{id:"usage"},"Usage"),Object(o.mdx)("pre",null,Object(o.mdx)("code",{parentName:"pre",className:"language-ts"},'import RenJS from "@renproject/ren";\nimport { Ethereum, BinanceSmartChain } from "@renproject/chains";\n// NOTE - @renproject/interfaces has been merged into @renproject/utils\nimport { RenNetwork } from "@renproject/utils";\n\nconst network = RenNetwork.Testnet;\n\nconst main = async () => {\n    // Initialize Ethereum and BSC chains.\n    const ethereum = new Ethereum(network, getEVMProvider(Ethereum, network));\n    const bsc = new BinanceSmartChain(\n        network,\n        getEVMProvider(BinanceSmartChain, network),\n    );\n\n    // Create RenJS instance. NOTE - chains must now be linked to RenJS using\n    // `withChains`.\n    const renJS = new RenJS(network).withChains(ethereum, bsc);\n\n    // Create gateway - mints and burns are both initialized with `gateway`.\n    // Gateway parameters are serializable.\n    const gateway = await renJS.gateway({\n        asset: ethereum.assets.DAI,\n        from: ethereum.Account({ amount: 2, convertToWei: true }),\n        to: bsc.Account(),\n    });\n\n    // `gateway.fees` exposes values and helpers for calculating fees.\n    console.log(gateway.fees);\n\n    // `gateway.setup` may contain multiple transactions.\n    await gateway.setup.approval.submit({\n        txConfig: {\n            gasLimit: 1000000,\n        },\n    });\n    // All transactions now follow a submit/wait pattern - see TxSubmitter\n    // interface.\n    await gateway.setup.approval.wait();\n\n    // Transactions emit a `status` whenever an update is available\n    // (confirmations, errors, etc.)\n    await gateway.in.submit().on("status", console.log);\n    await gateway.in.wait(1);\n\n    // NOTE: Event has been renamed to `"transaction"`.\n    gateway.on("transaction", (tx) => {\n        (async () => {\n            // GatewayTransaction parameters are serializable. To re-create\n            // the transaction, call `renJS.gatewayTransaction`.\n            console.log(tx.params);\n\n            // Wait for remaining confirmations for input transaction.\n            await tx.in.wait();\n\n            // RenVM transaction also follows the submit/wait pattern.\n            await tx.renVM.submit().on("status", console.log);\n            await tx.renVM.wait();\n\n            // `submit` accepts a `txConfig` parameter for overriding\n            // transaction config.\n            await tx.out.submit({\n                txConfig: {\n                    gasLimit: 1000000,\n                },\n            });\n            await tx.out.wait();\n\n            // All transactions return a `ChainTransaction` object in the\n            // status, with a `txid` field (base64) and a `txidFormatted`\n            // field (chain-dependent).\n            const outTx = tx.out.status.transaction;\n            console.log("Done:", outTx.txidFormatted);\n\n            // All chain classes expose a common set of helper functions (see\n            // `Chain` class.)\n            console.log(tx.toChain.transactionExplorerLink(outTx););\n        })().catch(reject);\n    });\n};\n\n// Test account - do not send real funds.\nconst mnemonic =\n    "black magic humor turtle symptom liar salmon rally hurt concert tower run";\n\n// Get EVM-chain provider using public JSON-RPC endpoint.\nexport const getEVMProvider = <EVM>(\n    ChainClass: EVMConstructor<EVM>,\n    network: RenNetwork,\n): EthProvider => {\n    // `configMap[network].network` is the same interface as used by\n    // `wallet_switchEthereumChain`.\n    const urls = ChainClass.configMap[network].network.rpcUrls;\n    let rpcUrl = urls[0];\n    const provider = new providers.JsonRpcProvider(rpcUrl);\n    const signer = Wallet.fromMnemonic(mnemonic).connect(provider);\n    return {\n        provider,\n        signer,\n    };\n};\n\nmain().catch((error) => {\n    console.error(error);\n    process.exit(1);\n});\n')))}u.isMDXComponent=!0},415:function(e,n,t){"use strict";t.r(n),t.d(n,"MDXContext",(function(){return u})),t.d(n,"MDXProvider",(function(){return d})),t.d(n,"mdx",(function(){return b})),t.d(n,"useMDXComponents",(function(){return m})),t.d(n,"withMDXComponents",(function(){return p}));var r=t(0),a=t.n(r);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(){return(i=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function c(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?c(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var u=a.a.createContext({}),p=function(e){return function(n){var t=m(n.components);return a.a.createElement(e,i({},n,{components:t}))}},m=function(e){var n=a.a.useContext(u),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},d=function(e){var n=m(e.components);return a.a.createElement(u.Provider,{value:n},e.children)},f={inlineCode:"code",wrapper:function(e){var n=e.children;return a.a.createElement(a.a.Fragment,{},n)}},h=a.a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,o=e.originalType,i=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=m(t),p=r,d=u["".concat(i,".").concat(p)]||u[p]||f[p]||o;return t?a.a.createElement(d,s(s({ref:n},c),{},{components:t})):a.a.createElement(d,s({ref:n},c))}));function b(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=t.length,i=new Array(o);i[0]=h;var c={};for(var s in n)hasOwnProperty.call(n,s)&&(c[s]=n[s]);c.originalType=e,c.mdxType="string"==typeof e?e:r,i[1]=c;for(var l=2;l<o;l++)i[l]=t[l];return a.a.createElement.apply(null,i)}return a.a.createElement.apply(null,t)}h.displayName="MDXCreateElement"}}]);