(window.webpackJsonp=window.webpackJsonp||[]).push([[280],{313:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return c})),n.d(t,"metadata",(function(){return l})),n.d(t,"toc",(function(){return d})),n.d(t,"default",(function(){return i}));var a=n(3),o=(n(0),n(415)),r=n(416),s=n(503);const c={title:"Query 24h fees",tag:"test"},l={unversionedId:"24h-fees",id:"24h-fees",isDocsHomePage:!1,title:"Query 24h fees",description:"In order to get the 24h fees earned by RenVM, you'll need to fetch the current all-time fees, and the all-time fees from 24 hours ago, and subgract the two.",source:"@site/stats/24h-fees.mdx",slug:"/24h-fees",permalink:"/ren-client-docs/stats/24h-fees",editUrl:"https://github.com/renproject/ren-client-docs/edit/master/stats/24h-fees.mdx",version:"current",sidebar:"subgraph",previous:{title:"Darknode Stats",permalink:"/ren-client-docs/stats/darknode-stats"}},d=[],u={toc:d};function i({components:e,...t}){return Object(o.mdx)("wrapper",Object(a.default)({},u,t,{components:e,mdxType:"MDXLayout"}),Object(o.mdx)(r.DocTag,{type:r.DocType.HowTo,mdxType:"DocTag"}),Object(o.mdx)("p",null,"In order to get the 24h fees earned by RenVM, you'll need to fetch the current all-time fees, and the all-time fees from 24 hours ago, and subgract the two."),Object(o.mdx)("pre",null,Object(o.mdx)("code",{parentName:"pre",className:"language-ts"},"const currentTimestamp = Math.floor(Date.now() / 1000);\n> 1628130330\nconst previousTimestamp = currentTimestamp - (24 * 60 * 60)\n> 1628043930\n")),Object(o.mdx)(s.GraphQL,{url:"https://stats.renproject.io",defaultQuery:'{\n  current: Snapshot(timestamp: "1628130330") {\n    fees {\n      asset\n      amount\n      amountInUsd\n    }\n  }\n  dayAgo: Snapshot(timestamp: "1628043930") {\n    fees {\n      asset\n      amount\n      amountInUsd\n    }\n  }\n}',mdxType:"GraphQL"}),Object(o.mdx)("p",null,"You can then loop each asset to get the difference:"),Object(o.mdx)("pre",null,Object(o.mdx)("code",{parentName:"pre",className:"language-ts"},"const dayAgo = response.data.dayAgo.fees.reduce(\n  (acc, fees) => ({ ...acc, [fees.asset]: fees }),\n  {}\n);\n\nconst oneDayFees = response.data.current.fees.reduce(\n  (acc, { asset, amountInUsd }) => ({\n    ...acc,\n    [asset]: amountInUsd - (dayAgo[asset] ? dayAgo[asset].amountInUsd : 0),\n  }),\n  {}\n);\n\nconsole.log(oneDayFees);\n")))}i.isMDXComponent=!0},416:function(e,t,n){"use strict";var a=n(4).default;Object.defineProperty(t,"__esModule",{value:!0}),t.DocTag=t.DocType=void 0;var o=a(n(0));let r;t.DocType=r,function(e){e.Tutorial="Tutorial",e.HowTo="How To",e.Reference="Reference",e.Explanation="Explanation"}(r||(t.DocType=r={}));const s={[r.Tutorial]:"#b16bfc",[r.HowTo]:"#EC0088",[r.Reference]:"#ff823a",[r.Explanation]:"#29C0AF"};t.DocTag=({type:e,marginBottom:t})=>o.default.createElement(o.default.Fragment,null,o.default.createElement("span",{style:{border:"2px solid "+s[e]||!1,borderRadius:"5px",color:s[e]||"orange",padding:"0.1rem 0.4rem",marginBottom:void 0!==t?t:30,display:"inline-block"}},String(e)))},503:function(e,t,n){"use strict";var a=n(4).default,o=n(19).default;Object.defineProperty(t,"__esModule",{value:!0}),t.GraphQL=void 0;var r=o(n(0)),s=a(n(667));n(375);const c=({url:e,defaultQuery:t,docExplorerOpen:a,minHeight:o})=>{if("undefined"==typeof window)return null;const{createGraphiQLFetcher:s}=n(692),c=n(693).default,l=s({url:e});return r.default.createElement("div",{style:{height:o||500}},r.default.createElement(r.Suspense,{fallback:r.default.createElement("div",null,"Loading...")},r.default.createElement(c,{docExplorerOpen:a,query:t,fetcher:l})))};t.GraphQL=e=>"undefined"==typeof window?null:r.default.createElement(s.default,null,(()=>r.default.createElement(r.default.Fragment,null,r.default.createElement(c,e),r.default.createElement("br",null))))}}]);