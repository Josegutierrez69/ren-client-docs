(window.webpackJsonp=window.webpackJsonp||[]).push([[187],{219:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return m})),n.d(t,"metadata",(function(){return p})),n.d(t,"toc",(function(){return f})),n.d(t,"Link",(function(){return b})),n.d(t,"default",(function(){return v}));var a=n(3),r=n(9),o=(n(0),n(413)),l=n(449),d=n.n(l),i=n(456),s=n.n(i),u=n(414),c=n(529),m={title:"Darknode Stats",slug:"/darknode-stats"},p={unversionedId:"darknode-stats",id:"darknode-stats",isDocsHomePage:!1,title:"Darknode Stats",description:"The RenVM subgraphs provides a way to query Ren's on-chain activity in a more efficient manner than making direct contract calls. It provides a GraphQL interface that can be used to lookup information about darknodes, assets and mints/burns.",source:"@site/stats/darknode-stats.mdx",slug:"/darknode-stats",permalink:"/ren-client-docs/stats/darknode-stats",editUrl:"https://github.com/renproject/ren-client-docs/edit/master/stats/darknode-stats.mdx",version:"current",sidebar:"subgraph",previous:{title:"RenVM Stats",permalink:"/ren-client-docs/stats/renvm-stats"},next:{title:"Query 24h fees",permalink:"/ren-client-docs/stats/24h-fees"}},f=[{value:"Networks",id:"networks",children:[]},{value:"Querying",id:"querying",children:[{value:"Try it now",id:"try-it-now",children:[]}]}],b=function(e){var t=e.children;return Object(o.mdx)("a",{target:"_blank",rel:"noopener noreferrer",href:t},t)},h={toc:f,Link:b};function v(e){var t=e.components,n=Object(r.default)(e,["components"]);return Object(o.mdx)("wrapper",Object(a.default)({},h,n,{components:t,mdxType:"MDXLayout"}),Object(o.mdx)(u.DocTag,{type:u.DocType.HowTo,mdxType:"DocTag"})," ",Object(o.mdx)(u.DocTag,{type:u.DocType.Reference,mdxType:"DocTag"}),Object(o.mdx)("p",null,"The RenVM subgraphs provides a way to query Ren's on-chain activity in a more efficient manner than making direct contract calls. It provides a GraphQL interface that can be used to lookup information about darknodes, assets and mints/burns."),Object(o.mdx)("h2",{id:"networks"},"Networks"),Object(o.mdx)("p",null,"A RenVM subgraph is available on the following networks:"),Object(o.mdx)(d.a,{defaultValue:"mainnet",values:[{label:"Mainnet",value:"mainnet"},{label:"Testnet",value:"testnet"}],mdxType:"Tabs"},Object(o.mdx)(s.a,{value:"mainnet",mdxType:"TabItem"},Object(o.mdx)("b",null,"Ethereum"),Object(o.mdx)("br",null),"API: ",Object(o.mdx)(b,{mdxType:"Link"},"https://api.thegraph.com/subgraphs/name/renproject/renvm"),Object(o.mdx)("br",null),Object(o.mdx)("b",null,"Binance Smart Chain"),Object(o.mdx)("br",null),"API:"," ",Object(o.mdx)(b,{mdxType:"Link"},"https://bsc-graph.renproject.io/subgraphs/name/renproject/renvm"),Object(o.mdx)("br",null),Object(o.mdx)("b",null,"Polygon"),Object(o.mdx)("br",null),"API:"," ",Object(o.mdx)(b,{mdxType:"Link"},"https://api.thegraph.com/subgraphs/name/renproject/renvm-polygon"),Object(o.mdx)("br",null),Object(o.mdx)("b",null,"Fantom"),Object(o.mdx)("br",null),"API:"," ",Object(o.mdx)(b,{mdxType:"Link"},"https://api.thegraph.com/subgraphs/name/renproject/renvm-fantom")),Object(o.mdx)(s.a,{value:"testnet",mdxType:"TabItem"},Object(o.mdx)("b",null,"Ethereum (Kovan)"),Object(o.mdx)("br",null),"API:"," ",Object(o.mdx)(b,{mdxType:"Link"},"https://api.thegraph.com/subgraphs/name/renproject/renvm-testnet"))),Object(o.mdx)("h2",{id:"querying"},"Querying"),Object(o.mdx)("p",null,"In order to query the RenVM subgraphs, you will need a GraphQL library. Some options are:"),Object(o.mdx)("ol",null,Object(o.mdx)("li",{parentName:"ol"},"The playground below"),Object(o.mdx)("li",{parentName:"ol"},"An SDK such as ",Object(o.mdx)("a",{parentName:"li",href:"https://www.npmjs.com/package/@apollo/client"},"Apollo")," - see others at ",Object(o.mdx)("a",{parentName:"li",href:"https://graphql.org/code/"},"https://graphql.org/code/"),"."),Object(o.mdx)("li",{parentName:"ol"},"A desktop client such as ",Object(o.mdx)("a",{parentName:"li",href:"https://insomnia.rest/products/insomnia"},"Insomnia")," or Postman")),Object(o.mdx)("p",null,"The subgraphs expose a single POST endpoint that allows you to specify what data to query. A query looks like this:"),Object(o.mdx)("pre",null,Object(o.mdx)("code",{parentName:"pre",className:"language-graphql"},'{\n  # Get the darknode with the highest BTC balance.\n  darknodes(first: 1, orderBy: balanceBTC, orderDirection: desc) {\n    id\n    operator\n    registeredAt\n    balances(where: { symbol: "renBTC" }) {\n      symbol\n      amountInUsd\n    }\n  }\n}\n')),Object(o.mdx)("p",null,"Posting this to the Ethereum Mainnet API url returns:"),Object(o.mdx)("pre",null,Object(o.mdx)("code",{parentName:"pre",className:"language-json"},'{\n  "data": {\n    "darknodes": [\n      {\n        "balances": [\n          {\n            "amountInUsd": "7264.59",\n            "symbol": "renBTC"\n          }\n        ],\n        "id": "0x9fec6514e6a83fa21f5da810ff45dc04dda40670",\n        "operator": "0xd8a0bc22290c42f35dfa010f4233b81a3ae3dd2c",\n        "registeredAt": "1590525958"\n      }\n    ]\n  }\n}\n')),Object(o.mdx)("h3",{id:"try-it-now"},"Try it now"),Object(o.mdx)("p",null,"Submit queries to the Mainnet Ethereum subgraph. The query will be reset when you leave the page."),Object(o.mdx)("p",null,"Click the Docs button in the top-right to explore the schema."),Object(o.mdx)(c.GraphQL,{minHeight:600,url:"https://api.thegraph.com/subgraphs/name/renproject/renvm",defaultQuery:'{\n  # Get the number of registered darknodes.\n  renVM(id: 1) {\n    numberOfDarknodes\n  }\n  # Get the darknode with the highest BTC balance.\n  darknodes(first: 1, orderBy: balanceBTC, orderDirection: desc) {\n    id\n    operator\n    registeredAt\n    balances(where: {symbol: "renBTC"}) {\n      symbol\n      amountInUsd\n    }\n  }\n}',mdxType:"GraphQL"}))}v.isMDXComponent=!0},414:function(e,t,n){"use strict";var a=n(4).default;Object.defineProperty(t,"__esModule",{value:!0}),t.DocTag=t.DocType=void 0;var r,o,l=a(n(0));t.DocType=o,function(e){e.Tutorial="Tutorial",e.HowTo="How To",e.Reference="Reference",e.Explanation="Explanation"}(o||(t.DocType=o={}));var d=((r={})[o.Tutorial]="#b16bfc",r[o.HowTo]="#EC0088",r[o.Reference]="#ff823a",r[o.Explanation]="#29C0AF",r);t.DocTag=function(e){var t=e.type,n=e.marginBottom;return l.default.createElement(l.default.Fragment,null,l.default.createElement("span",{style:{border:"2px solid "+d[t]||!1,borderRadius:"5px",color:d[t]||"orange",padding:"0.1rem 0.4rem",marginBottom:void 0!==n?n:30,display:"inline-block"}},String(t)))}},416:function(e,t,n){"use strict";function a(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=a(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}n.r(t),t.default=function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=a(e))&&(r&&(r+=" "),r+=t);return r}},432:function(e,t,n){"use strict";var a=n(4).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(0),o=a(n(434));var l=function(){var e=(0,r.useContext)(o.default);if(null==e)throw new Error("`useUserPreferencesContext` is used outside of `Layout` Component.");return e};t.default=l},434:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(0,n(0).createContext)(void 0);t.default=a},449:function(e,t,n){"use strict";var a=n(4).default,r=n(19).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(0)),l=a(n(432)),d=a(n(416)),i=a(n(369));var s=37,u=39;var c=function(e){var t=e.lazy,n=e.block,a=e.defaultValue,r=e.values,c=e.groupId,m=e.className,p=(0,l.default)(),f=p.tabGroupChoices,b=p.setTabGroupChoices,h=(0,o.useState)(a),v=h[0],g=h[1],y=o.Children.toArray(e.children),x=[];if(null!=c){var j=f[c];null!=j&&j!==v&&r.some((function(e){return e.value===j}))&&g(j)}var O=function(e){var t=e.target,n=x.indexOf(t),a=y[n].props.value;g(a),null!=c&&(b(c,a),setTimeout((function(){var e,n,a,r,o,l,d,s;(e=t.getBoundingClientRect(),n=e.top,a=e.left,r=e.bottom,o=e.right,l=window,d=l.innerHeight,s=l.innerWidth,n>=0&&o<=s&&r<=d&&a>=0)||(t.scrollIntoView({block:"center",behavior:"smooth"}),t.classList.add(i.default.tabItemActive),setTimeout((function(){return t.classList.remove(i.default.tabItemActive)}),2e3))}),150))},k=function(e){var t,n;switch(e.keyCode){case u:var a=x.indexOf(e.target)+1;n=x[a]||x[0];break;case s:var r=x.indexOf(e.target)-1;n=x[r]||x[x.length-1]}null===(t=n)||void 0===t||t.focus()};return o.default.createElement("div",{className:"tabs-container"},o.default.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,d.default)("tabs",{"tabs--block":n},m)},r.map((function(e){var t=e.value,n=e.label;return o.default.createElement("li",{role:"tab",tabIndex:v===t?0:-1,"aria-selected":v===t,className:(0,d.default)("tabs__item",i.default.tabItem,{"tabs__item--active":v===t}),key:t,ref:function(e){return x.push(e)},onKeyDown:k,onFocus:O,onClick:O},n)}))),t?(0,o.cloneElement)(y.filter((function(e){return e.props.value===v}))[0],{className:"margin-vert--md"}):o.default.createElement("div",{className:"margin-vert--md"},y.map((function(e,t){return(0,o.cloneElement)(e,{key:t,hidden:e.props.value!==v})}))))};t.default=c},456:function(e,t,n){"use strict";var a=n(4).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(0));var o=function(e){var t=e.children,n=e.hidden,a=e.className;return r.default.createElement("div",{role:"tabpanel",hidden:n,className:a},t)};t.default=o},529:function(e,t,n){"use strict";var a=n(4).default,r=n(19).default;Object.defineProperty(t,"__esModule",{value:!0}),t.GraphQL=void 0;var o=r(n(0)),l=a(n(729));n(373);var d=function(e){var t=e.url,a=e.defaultQuery,r=e.docExplorerOpen,l=e.minHeight;if("undefined"==typeof window)return null;var d=n(757).createGraphiQLFetcher,i=n(758).default,s=d({url:t});return o.default.createElement("div",{style:{height:l||500}},o.default.createElement(o.Suspense,{fallback:o.default.createElement("div",null,"Loading...")},o.default.createElement(i,{docExplorerOpen:r,query:a,fetcher:s})))};t.GraphQL=function(e){return"undefined"==typeof window?null:o.default.createElement(l.default,null,(function(){return o.default.createElement(o.default.Fragment,null,o.default.createElement(d,e),o.default.createElement("br",null))}))}}}]);