(window.webpackJsonp=window.webpackJsonp||[]).push([[187],{220:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return u})),n.d(t,"metadata",(function(){return m})),n.d(t,"toc",(function(){return p})),n.d(t,"Link",(function(){return b})),n.d(t,"default",(function(){return h}));var a=n(3),r=(n(0),n(413)),o=n(449),l=n.n(o),d=n(456),s=n.n(d),i=n(414),c=n(529);const u={title:"Darknode Stats",slug:"/darknode-stats"},m={unversionedId:"darknode-stats",id:"darknode-stats",isDocsHomePage:!1,title:"Darknode Stats",description:"The RenVM subgraphs provides a way to query Ren's on-chain activity in a more efficient manner than making direct contract calls. It provides a GraphQL interface that can be used to lookup information about darknodes, assets and mints/burns.",source:"@site/stats/darknode-stats.mdx",slug:"/darknode-stats",permalink:"/ren-client-docs/stats/darknode-stats",editUrl:"https://github.com/renproject/ren-client-docs/edit/master/stats/darknode-stats.mdx",version:"current",sidebar:"subgraph",previous:{title:"RenVM Stats",permalink:"/ren-client-docs/stats/renvm-stats"},next:{title:"Query 24h fees",permalink:"/ren-client-docs/stats/24h-fees"}},p=[{value:"Networks",id:"networks",children:[]},{value:"Querying",id:"querying",children:[{value:"Try it now",id:"try-it-now",children:[]}]}],b=({children:e})=>Object(r.mdx)("a",{target:"_blank",rel:"noopener noreferrer",href:e},e),f={toc:p,Link:b};function h({components:e,...t}){return Object(r.mdx)("wrapper",Object(a.default)({},f,t,{components:e,mdxType:"MDXLayout"}),Object(r.mdx)(i.DocTag,{type:i.DocType.HowTo,mdxType:"DocTag"})," ",Object(r.mdx)(i.DocTag,{type:i.DocType.Reference,mdxType:"DocTag"}),Object(r.mdx)("p",null,"The RenVM subgraphs provides a way to query Ren's on-chain activity in a more efficient manner than making direct contract calls. It provides a GraphQL interface that can be used to lookup information about darknodes, assets and mints/burns."),Object(r.mdx)("h2",{id:"networks"},"Networks"),Object(r.mdx)("p",null,"A RenVM subgraph is available on the following networks:"),Object(r.mdx)(l.a,{defaultValue:"mainnet",values:[{label:"Mainnet",value:"mainnet"},{label:"Testnet",value:"testnet"}],mdxType:"Tabs"},Object(r.mdx)(s.a,{value:"mainnet",mdxType:"TabItem"},Object(r.mdx)("b",null,"Ethereum"),Object(r.mdx)("br",null),"API: ",Object(r.mdx)(b,{mdxType:"Link"},"https://api.thegraph.com/subgraphs/name/renproject/renvm"),Object(r.mdx)("br",null),Object(r.mdx)("b",null,"Binance Smart Chain"),Object(r.mdx)("br",null),"API:"," ",Object(r.mdx)(b,{mdxType:"Link"},"https://bsc-graph.renproject.io/subgraphs/name/renproject/renvm"),Object(r.mdx)("br",null),Object(r.mdx)("b",null,"Polygon"),Object(r.mdx)("br",null),"API:"," ",Object(r.mdx)(b,{mdxType:"Link"},"https://api.thegraph.com/subgraphs/name/renproject/renvm-polygon"),Object(r.mdx)("br",null),Object(r.mdx)("b",null,"Fantom"),Object(r.mdx)("br",null),"API:"," ",Object(r.mdx)(b,{mdxType:"Link"},"https://api.thegraph.com/subgraphs/name/renproject/renvm-fantom")),Object(r.mdx)(s.a,{value:"testnet",mdxType:"TabItem"},Object(r.mdx)("b",null,"Ethereum (Kovan)"),Object(r.mdx)("br",null),"API:"," ",Object(r.mdx)(b,{mdxType:"Link"},"https://api.thegraph.com/subgraphs/name/renproject/renvm-testnet"))),Object(r.mdx)("h2",{id:"querying"},"Querying"),Object(r.mdx)("p",null,"In order to query the RenVM subgraphs, you will need a GraphQL library. Some options are:"),Object(r.mdx)("ol",null,Object(r.mdx)("li",{parentName:"ol"},"The playground below"),Object(r.mdx)("li",{parentName:"ol"},"An SDK such as ",Object(r.mdx)("a",{parentName:"li",href:"https://www.npmjs.com/package/@apollo/client"},"Apollo")," - see others at ",Object(r.mdx)("a",{parentName:"li",href:"https://graphql.org/code/"},"https://graphql.org/code/"),"."),Object(r.mdx)("li",{parentName:"ol"},"A desktop client such as ",Object(r.mdx)("a",{parentName:"li",href:"https://insomnia.rest/products/insomnia"},"Insomnia")," or Postman")),Object(r.mdx)("p",null,"The subgraphs expose a single POST endpoint that allows you to specify what data to query. A query looks like this:"),Object(r.mdx)("pre",null,Object(r.mdx)("code",{parentName:"pre",className:"language-graphql"},'{\n  # Get the darknode with the highest BTC balance.\n  darknodes(first: 1, orderBy: balanceBTC, orderDirection: desc) {\n    id\n    operator\n    registeredAt\n    balances(where: { symbol: "renBTC" }) {\n      symbol\n      amountInUsd\n    }\n  }\n}\n')),Object(r.mdx)("p",null,"Posting this to the Ethereum Mainnet API url returns:"),Object(r.mdx)("pre",null,Object(r.mdx)("code",{parentName:"pre",className:"language-json"},'{\n  "data": {\n    "darknodes": [\n      {\n        "balances": [\n          {\n            "amountInUsd": "7264.59",\n            "symbol": "renBTC"\n          }\n        ],\n        "id": "0x9fec6514e6a83fa21f5da810ff45dc04dda40670",\n        "operator": "0xd8a0bc22290c42f35dfa010f4233b81a3ae3dd2c",\n        "registeredAt": "1590525958"\n      }\n    ]\n  }\n}\n')),Object(r.mdx)("h3",{id:"try-it-now"},"Try it now"),Object(r.mdx)("p",null,"Submit queries to the Mainnet Ethereum subgraph. The query will be reset when you leave the page."),Object(r.mdx)("p",null,"Click the Docs button in the top-right to explore the schema."),Object(r.mdx)(c.GraphQL,{minHeight:600,url:"https://api.thegraph.com/subgraphs/name/renproject/renvm",defaultQuery:'{\n  # Get the number of registered darknodes.\n  renVM(id: 1) {\n    numberOfDarknodes\n  }\n  # Get the darknode with the highest BTC balance.\n  darknodes(first: 1, orderBy: balanceBTC, orderDirection: desc) {\n    id\n    operator\n    registeredAt\n    balances(where: {symbol: "renBTC"}) {\n      symbol\n      amountInUsd\n    }\n  }\n}',mdxType:"GraphQL"}))}h.isMDXComponent=!0},414:function(e,t,n){"use strict";var a=n(4).default;Object.defineProperty(t,"__esModule",{value:!0}),t.DocTag=t.DocType=void 0;var r=a(n(0));let o;t.DocType=o,function(e){e.Tutorial="Tutorial",e.HowTo="How To",e.Reference="Reference",e.Explanation="Explanation"}(o||(t.DocType=o={}));const l={[o.Tutorial]:"#b16bfc",[o.HowTo]:"#EC0088",[o.Reference]:"#ff823a",[o.Explanation]:"#29C0AF"};t.DocTag=({type:e,marginBottom:t})=>r.default.createElement(r.default.Fragment,null,r.default.createElement("span",{style:{border:"2px solid "+l[e]||!1,borderRadius:"5px",color:l[e]||"orange",padding:"0.1rem 0.4rem",marginBottom:void 0!==t?t:30,display:"inline-block"}},String(e)))},416:function(e,t,n){"use strict";function a(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=a(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}n.r(t),t.default=function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=a(e))&&(r&&(r+=" "),r+=t);return r}},432:function(e,t,n){"use strict";var a=n(4).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(0),o=a(n(434));var l=function(){const e=(0,r.useContext)(o.default);if(null==e)throw new Error("`useUserPreferencesContext` is used outside of `Layout` Component.");return e};t.default=l},434:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(0,n(0).createContext)(void 0);t.default=a},449:function(e,t,n){"use strict";var a=n(4).default,r=n(19).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(0)),l=a(n(432)),d=a(n(416)),s=a(n(369));const i=37,c=39;var u=function(e){const{lazy:t,block:n,defaultValue:a,values:r,groupId:u,className:m}=e,{tabGroupChoices:p,setTabGroupChoices:b}=(0,l.default)(),[f,h]=(0,o.useState)(a),g=o.Children.toArray(e.children),y=[];if(null!=u){const e=p[u];null!=e&&e!==f&&r.some((t=>t.value===e))&&h(e)}const x=e=>{const t=e.target,n=y.indexOf(t),a=g[n].props.value;h(a),null!=u&&(b(u,a),setTimeout((()=>{(function(e){const{top:t,left:n,bottom:a,right:r}=e.getBoundingClientRect(),{innerHeight:o,innerWidth:l}=window;return t>=0&&r<=l&&a<=o&&n>=0})(t)||(t.scrollIntoView({block:"center",behavior:"smooth"}),t.classList.add(s.default.tabItemActive),setTimeout((()=>t.classList.remove(s.default.tabItemActive)),2e3))}),150))},v=e=>{var t;let n;switch(e.keyCode){case c:{const t=y.indexOf(e.target)+1;n=y[t]||y[0];break}case i:{const t=y.indexOf(e.target)-1;n=y[t]||y[y.length-1];break}}null===(t=n)||void 0===t||t.focus()};return o.default.createElement("div",{className:"tabs-container"},o.default.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,d.default)("tabs",{"tabs--block":n},m)},r.map((({value:e,label:t})=>o.default.createElement("li",{role:"tab",tabIndex:f===e?0:-1,"aria-selected":f===e,className:(0,d.default)("tabs__item",s.default.tabItem,{"tabs__item--active":f===e}),key:e,ref:e=>y.push(e),onKeyDown:v,onFocus:x,onClick:x},t)))),t?(0,o.cloneElement)(g.filter((e=>e.props.value===f))[0],{className:"margin-vert--md"}):o.default.createElement("div",{className:"margin-vert--md"},g.map(((e,t)=>(0,o.cloneElement)(e,{key:t,hidden:e.props.value!==f})))))};t.default=u},456:function(e,t,n){"use strict";var a=n(4).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(0));var o=function({children:e,hidden:t,className:n}){return r.default.createElement("div",{role:"tabpanel",hidden:t,className:n},e)};t.default=o},529:function(e,t,n){"use strict";var a=n(4).default,r=n(19).default;Object.defineProperty(t,"__esModule",{value:!0}),t.GraphQL=void 0;var o=r(n(0)),l=a(n(732));n(373);const d=({url:e,defaultQuery:t,docExplorerOpen:a,minHeight:r})=>{if("undefined"==typeof window)return null;const{createGraphiQLFetcher:l}=n(757),d=n(758).default,s=l({url:e});return o.default.createElement("div",{style:{height:r||500}},o.default.createElement(o.Suspense,{fallback:o.default.createElement("div",null,"Loading...")},o.default.createElement(d,{docExplorerOpen:a,query:t,fetcher:s})))};t.GraphQL=e=>"undefined"==typeof window?null:o.default.createElement(l.default,null,(()=>o.default.createElement(o.default.Fragment,null,o.default.createElement(d,e),o.default.createElement("br",null))))}}]);